# Enumeration
We launched our Windows 10 Lab, and accessed XAMPP control panel to turn on Apache and MySQL to launch the web server.

```bash
xfreerdp /u:administrator /p:lab /v:192.168.231.10
```

Using DIRB, we enumerated through the directories of the web server, discovering that */phpmyadmin*, which is an administration tool for MySQL databases, was available.

A [quick search on the Internet](https://stackoverflow.com/questions/5818358/phpmyadmin-default-login-password) show that the default credentials for phpmyadmin console was "root" with password blank. However, since the configuration `C:\xampp\phpMyAdmin\config.inc.php` is set to False for "AllowNoPassword", we get an error message.
![[Pasted image 20221214221107.png]]

# Burp Suite Intruder
This tool allows us to automate username and password combinations to attempt to login to the portal.

For this attack, each POST request will require us to send a new unique *token* and *set_session* cookie each request, so as to prevent bruteforcing. As a result, we cannot use just a simple list for the Intruder tool, as the cookie and token value will remain the same each time.

We will make use of the **pitchfork** attack, as well as **recursive grep** for us to change the token and cookie, along with the password list to brute force.

First, we will configure the payload positions at *Positions*.
![[Pasted image 20221214223149.png]]

Next, under *Options* > *Grep Extract*, add two recursive grep from the web server response - (1) session cookie; (2) token. 
\* Take note that the values of the cookie and token should be taken from all the way at the bottom, where the set_session and token value hidden input is.
![[Pasted image 20221214223419.png]]

Finally, under *Payloads*, configure the respective payload sets with either the recursive grep, or the simple list.
![[Pasted image 20221214223526.png]]
![[Pasted image 20221214223543.png]]
![[Pasted image 20221214223555.png]]
![[Pasted image 20221214223606.png]]

\* If you face this error, go under *Resource Pool* to create a custom resource pool with only 1 concurrent request.
![[Pasted image 20221214223744.png]]



***
# Topical Exercises
1.  Use Burp Intruder to gain access to the phpMyAdmin site running on your Windows 10 lab machine.
	1. First, use the proxy to get the POST request![[Pasted image 20221215204518.png]]
	2. Send the failed POST request to Intruder to select payload postitions and payloads to use![[Pasted image 20221215204710.png]]![[Pasted image 20221215205247.png]]![[Pasted image 20221215205301.png]]![[Pasted image 20221215210658.png]]
	3. The "Status 302" indicates that the password is "root"![[Pasted image 20221215210752.png]]

2.  Insert a new user into the "users" table.
	1. SQL to query the existing users: `select * from webappdb.users`![[Pasted image 20221215211005.png]]
	2. Insert new user and password: `insert into webappdb.users(password, username) VALUES ("backdoor","backdoor");`![[Pasted image 20221215211102.png]]
3. Exploit 192.168.164.52 running phptapMyAdmin![[Pasted image 20221215212543.png]]